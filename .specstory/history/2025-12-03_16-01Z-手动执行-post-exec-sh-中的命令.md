<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session cce29a9e-e68d-470f-bc67-e8d2e27b6a2a (2025-12-03 16:01Z) -->

# 手动执行 post_exec.sh 中的命令 (2025-12-03 16:01Z)

_**User (2025-12-03 13:05Z)**_

@Splat-SLAM/.devcontainer/post_exec.sh 如果想要手动执行这里面的命令，那么按顺序该执行什么

---

_**Agent (model default, mode Ask)**_



---


查看 `post_exec.sh` 的内容，以便按顺序列出需要手动执行的命令。


---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\post_exec.sh",
  "charsLimit": 1000000,
  "effectiveUri": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\post_exec.sh"
}
```
Result:

```json
{
  "contents": "#!/bin/bash\nset -eux\n\necho \"&gt;&gt;&gt; Start of post install script &lt;&lt;&lt;\"\n\nDISPLAY_EXPORT=\"export DISPLAY=:0\"\n\nif [[ ! -d \"/workspace/Splat-SLAM\" ]]; then\n  echo \"Cloning Splat-SLAM repository...\"\n  \n  cd /workspace\n\n  git clone --recursive https://github.com/iis-esslingen/Splat-SLAM.git\n\n  cd /workspace/Splat-SLAM\n\n  sed -i 's/p_view\\.z &lt;= 0\\.2f/p_view\\.z &lt;= 0\\.001f/' /workspace/Splat-SLAM/thirdparty/diff-gaussian-rasterization-w-pose/cuda_rasterizer/auxiliary.h &amp;&amp; \\\n    pip install --no-cache-dir -e thirdparty/lietorch/ \\\n                                   thirdparty/diff-gaussian-rasterization-w-pose/ \\\n                                   thirdparty/simple-knn/ \\\n                                   thirdparty/evaluate_3d_reconstruction_lib/ &amp;&amp; \\\n    pip install --no-cache-dir -e . &amp;&amp; \\\n    pip install --no-cache-dir -r requirements.txt &amp;&amp; \\\n    pip install --no-cache-dir pytorch-lightning==1.9 --no-deps &amp;&amp; \\\n    pip install --no-cache-dir gdown\n\n  pip install gdown\n  gdown \"https://drive.google.com/uc?id=1oZbVPrubtaIUjRRuT8F-YjjHBW-1spKT\" -O glorie-pretrained.zip\n  unzip glorie-pretrained.zip -d pretrained\nfi\n\necho \"&gt;&gt;&gt; End of post install script &lt;&lt;&lt;\" ",
  "totalLinesInFile": 32
}
```
Status: **completed**


</details>
</tool-use>

---



---


按顺序手动执行以下命令：

## 执行顺序

### 1. 检查目录是否存在
```bash
# 检查 /workspace/Splat-SLAM 目录是否存在
# 如果不存在，继续执行后续步骤
```

### 2. 切换到工作目录
```bash
cd /workspace
```

### 3. 克隆仓库（包含子模块）
```bash
git clone --recursive https://github.com/iis-esslingen/Splat-SLAM.git
```

### 4. 进入项目目录
```bash
cd /workspace/Splat-SLAM
```

### 5. 修改源代码文件
```bash
sed -i 's/p_view\.z <= 0\.2f/p_view\.z <= 0\.001f/' /workspace/Splat-SLAM/thirdparty/diff-gaussian-rasterization-w-pose/cuda_rasterizer/auxiliary.h
```

### 6. 安装依赖包（按顺序）
```bash
# 安装第三方库（可编辑模式）
pip install --no-cache-dir -e thirdparty/lietorch/
pip install --no-cache-dir -e thirdparty/diff-gaussian-rasterization-w-pose/
pip install --no-cache-dir -e thirdparty/simple-knn/
pip install --no-cache-dir -e thirdparty/evaluate_3d_reconstruction_lib/

# 安装主项目（可编辑模式）
pip install --no-cache-dir -e .

# 安装 requirements.txt 中的依赖
pip install --no-cache-dir -r requirements.txt

# 安装 pytorch-lightning（不安装依赖）
pip install --no-cache-dir pytorch-lightning==1.9 --no-deps

# 安装 gdown
pip install --no-cache-dir gdown
```

### 7. 下载预训练模型
```bash
# 再次安装 gdown（确保已安装）
pip install gdown

# 下载预训练模型
gdown "https://drive.google.com/uc?id=1oZbVPrubtaIUjRRuT8F-YjjHBW-1spKT" -O glorie-pretrained.zip
```

### 8. 解压预训练模型
```bash
unzip glorie-pretrained.zip -d pretrained
```

## 注意事项

1. 路径：脚本使用 `/workspace`，在 Windows 上需改为对应路径（如 `E:\Desktop\rec_records\nerf-3dgs-benchmark\Splat-SLAM`）。
2. 环境：建议在 Linux 或 WSL 中执行，或在 Docker 容器中运行。
3. 条件执行：仅在 `/workspace/Splat-SLAM` 不存在时执行上述步骤。
4. 错误处理：脚本使用 `set -eux`，遇到错误会立即退出；手动执行时注意检查每步结果。

在 Windows PowerShell 中，`sed` 命令可能不可用，需要：
- 使用 WSL
- 安装 Git Bash
- 手动编辑 `auxiliary.h` 文件，将 `p_view.z <= 0.2f` 替换为 `p_view.z <= 0.001f`

---

_**User (2025-12-03 13:05Z)**_

为什么没有conda环境的创建命令呢，是在这之前的docker容器时就已经创建了吗

---

_**Agent (model default, mode Ask)**_



---


检查 Dockerfile 和相关配置文件，确认 conda 环境的创建时机。


---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\dockerfile",
  "charsLimit": 1000000,
  "effectiveUri": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\dockerfile"
}
```
Result:

```json
{
  "contents": "FROM pytorch/pytorch:2.1.0-cuda11.8-cudnn8-devel\n\n# Set arguments and environment variables\nARG DEBIAN_FRONTEND=noninteractive\nENV TZ=Europe/Berlin\nENV CUDA_HOME=/usr/local/cuda\nENV TORCH_CUDA_ARCH_LIST=\"8.0+PTX\" \n\n# Install essential tools\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    git \\\n    pkg-config \\\n    unzip \\\n    tzdata \\\n    libopencv-dev \\\n    cmake \\\n    wget \\\n    libglib2.0-0 \\\n    libgl1-mesa-glx &amp;&amp; \\\n    apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n\n\nCMD [\"bash\"]",
  "totalLinesInFile": 24
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\devcontainer.json",
  "charsLimit": 1000000,
  "effectiveUri": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\devcontainer.json"
}
```
Status: **loading**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_file_v2">
<details>
<summary>Tool use: **read_file_v2**</summary>


Parameters:

```json
{
  "targetFile": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\initialize_command",
  "charsLimit": 1000000,
  "effectiveUri": "e:\\Desktop\\rec_records\\nerf-3dgs-benchmark\\Splat-SLAM\\.devcontainer\\initialize_command"
}
```
Result:

```json
{
  "contents": "#!/usr/bin/env bash\n\n# Disable access control so any client can connect to the x-server.\nif [[ -x \"$(command -v xhost)\" ]]; then\n  echo Disabling access control for X-server.\n  xhost + &gt; /dev/null\nfi\n\nENVIRONMENT_FILE=\".devcontainer/.env\"\nENVIRONMENT_VARIABLE=\"SELECTED_DIRECTORY\"\n\necho Set up a directory to be mounted inside the dev container.\necho Note that if you change the directory to be mounted, you will need to rebuild the container for the changes to take effect.\n\nif [[ -f \"${ENVIRONMENT_FILE}\" ]]; then\n  source \"${ENVIRONMENT_FILE}\"\n\n  if [[ ! -z \"${ENVIRONMENT_VARIABLE}\" ]]; then\n    MESSAGE=\"The directory '${!ENVIRONMENT_VARIABLE}' has previously been selected for mounting. Would you like to choose a different directory? [y/N] \"\n    read -p \"${MESSAGE}\" confirm &amp;&amp; [[ $confirm == y ]] || exit 0\n  fi\nfi\n\n# Allow the developer to choose a directory of their choice to mount.\nread -p \"Enter a directory to mount: \" SELECTED_DIRECTORY\n\n# Check if the user canceled directory selection.\nif [[ -z \"${SELECTED_DIRECTORY}\" ]]; then\n  echo Error: Directory selection canceled.\n  exit 1\nfi\n\n# Check if the provided directory exists.\nif [[ ! -d \"${SELECTED_DIRECTORY}\" ]]; then\n  echo Error: The directory does not exist.\n  exit 1\nfi\n\n# Save the selected directory in an environment variable. This will later be leveraged\n# by the docker-compose.yml to mount the specified directory inside the container.\necho \"${ENVIRONMENT_VARIABLE}=${SELECTED_DIRECTORY}\" &gt; \"${ENVIRONMENT_FILE}\"",
  "totalLinesInFile": 41
}
```
Status: **completed**


</details>
</tool-use>

---



---

